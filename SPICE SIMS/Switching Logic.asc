Version 4.1
SHEET 1 4916 1876
WIRE 1792 -160 1760 -160
WIRE -176 -144 -256 -144
WIRE 768 -144 -176 -144
WIRE 1296 -144 768 -144
WIRE 1328 -144 1296 -144
WIRE 1792 -144 1760 -144
WIRE 1968 -144 1856 -144
WIRE 2176 -144 1968 -144
WIRE 1792 -128 1760 -128
WIRE 1792 -112 1776 -112
WIRE 1968 -112 1968 -144
WIRE 2176 -112 2176 -144
WIRE 2512 -112 2496 -112
WIRE 2528 -112 2512 -112
WIRE 1776 -96 1776 -112
WIRE 1792 -96 1776 -96
WIRE 128 -64 48 -64
WIRE 688 -64 128 -64
WIRE 1088 -64 688 -64
WIRE 1328 -64 1088 -64
WIRE 1776 -64 1776 -96
WIRE 1792 -64 1776 -64
WIRE 1808 -64 1808 -96
WIRE 1808 -64 1792 -64
WIRE 1792 -48 1792 -64
WIRE 1968 -16 1968 -32
WIRE 2304 -16 1968 -16
WIRE 1968 0 1968 -16
WIRE 2176 0 2176 -48
WIRE 2496 0 2496 -112
WIRE 368 16 320 16
WIRE 608 16 368 16
WIRE 880 16 608 16
WIRE 1328 16 880 16
WIRE 2304 16 2272 16
WIRE 2400 16 2368 16
WIRE 2448 16 2400 16
WIRE 320 48 320 16
WIRE 1296 48 1296 -144
WIRE 2624 64 2592 64
WIRE 2176 96 2176 80
WIRE 2176 96 2096 96
WIRE 2272 96 2272 16
WIRE 2272 96 2176 96
WIRE 2400 96 2400 16
WIRE 2400 96 2304 96
WIRE 2096 112 2096 96
WIRE 2176 112 2176 96
WIRE 48 128 48 -64
WIRE 2304 128 2304 96
WIRE 2400 128 2400 96
WIRE 2496 144 2496 96
WIRE 2592 144 2592 64
WIRE 2592 144 2496 144
WIRE 2624 144 2592 144
WIRE 1296 160 1296 128
WIRE 1344 160 1296 160
WIRE 1456 160 1424 160
WIRE 1472 160 1456 160
WIRE 320 176 320 128
WIRE -256 192 -256 -144
WIRE 608 192 608 16
WIRE 688 192 688 -64
WIRE 768 192 768 -144
WIRE 1296 192 1296 160
WIRE 1456 208 1456 160
WIRE 1968 208 1968 80
WIRE 2096 208 2096 176
WIRE 2096 208 1968 208
WIRE 2176 208 2176 192
WIRE 2176 208 2096 208
WIRE 2304 208 2176 208
WIRE 2400 208 2400 192
WIRE 2400 208 2304 208
WIRE 2096 224 2096 208
WIRE 2592 224 2592 144
WIRE 2624 224 2592 224
WIRE 48 256 48 208
WIRE 1296 288 1296 272
WIRE 1456 288 1456 272
WIRE 608 304 608 256
WIRE 688 304 688 256
WIRE 688 304 608 304
WIRE 768 304 768 256
WIRE 768 304 688 304
WIRE 1088 320 1088 -64
WIRE -256 336 -256 272
WIRE 1088 432 1088 400
WIRE 1136 432 1088 432
WIRE 1248 432 1216 432
WIRE 1264 432 1248 432
WIRE 1088 464 1088 432
WIRE 1248 480 1248 432
WIRE 1088 560 1088 544
WIRE 1248 560 1248 544
WIRE 3056 592 3040 592
WIRE 3168 592 3136 592
WIRE 3184 592 3168 592
WIRE 3344 592 3264 592
WIRE 3456 592 3344 592
WIRE 3504 592 3456 592
WIRE 880 608 880 16
WIRE 1840 608 1824 608
WIRE 2192 608 2176 608
WIRE 2544 608 2528 608
WIRE 3168 640 3168 592
WIRE 3344 656 3344 592
WIRE 3456 672 3456 592
WIRE 1728 704 1680 704
WIRE 1824 704 1824 608
WIRE 1824 704 1792 704
WIRE 2096 704 1984 704
WIRE 880 720 880 688
WIRE 928 720 880 720
WIRE 1040 720 1008 720
WIRE 1056 720 1040 720
WIRE 2096 720 2064 720
WIRE 2176 720 2176 608
WIRE 2176 720 2160 720
WIRE 3168 720 3168 704
WIRE 1728 736 1696 736
WIRE 1984 736 1984 704
WIRE 1984 736 1792 736
WIRE 2064 736 2064 720
WIRE 2096 736 2064 736
WIRE 880 752 880 720
WIRE 2064 752 2064 736
WIRE 2096 752 2064 752
WIRE 1040 768 1040 720
WIRE 2096 768 1856 768
WIRE 2064 784 2064 752
WIRE 2112 784 2112 768
WIRE 2112 784 2064 784
WIRE 2112 800 2112 784
WIRE 3168 816 3168 800
WIRE 880 848 880 832
WIRE 1040 848 1040 832
WIRE 1712 848 1648 848
WIRE 1856 848 1856 768
WIRE 1856 848 1776 848
WIRE 1984 848 1984 736
WIRE 2096 848 1984 848
WIRE 2096 864 2080 864
WIRE 2528 864 2528 608
WIRE 2528 864 2160 864
WIRE 2928 864 2880 864
WIRE 3072 864 3008 864
WIRE 3104 864 3072 864
WIRE 1696 880 1696 736
WIRE 1696 880 1520 880
WIRE 1712 880 1696 880
WIRE 2096 880 1776 880
WIRE 3072 880 3072 864
WIRE 2080 896 2080 864
WIRE 2096 896 2080 896
WIRE 2096 912 1984 912
WIRE 2080 928 2080 896
WIRE 2112 928 2112 912
WIRE 2112 928 2080 928
WIRE 2112 944 2112 928
WIRE 1536 976 1472 976
WIRE 1984 976 1984 912
WIRE 1984 976 1600 976
WIRE 3072 976 3072 960
WIRE 3168 976 3168 912
WIRE 1520 1008 1520 880
WIRE 1520 1008 1472 1008
WIRE 1536 1008 1520 1008
WIRE 3040 1120 3024 1120
WIRE 3152 1120 3120 1120
WIRE 3168 1120 3152 1120
WIRE 3440 1120 3248 1120
WIRE 3488 1120 3440 1120
WIRE 3152 1168 3152 1120
WIRE 3440 1200 3440 1120
WIRE 704 1248 656 1248
WIRE 736 1248 704 1248
WIRE 752 1248 736 1248
WIRE 1024 1248 992 1248
WIRE 1088 1248 1024 1248
WIRE 1184 1248 1088 1248
WIRE 1088 1264 1088 1248
WIRE 3152 1280 3152 1248
WIRE 2912 1328 2864 1328
WIRE 3056 1328 2992 1328
WIRE 3088 1328 3056 1328
WIRE 704 1344 704 1248
WIRE 736 1344 704 1344
WIRE 3056 1344 3056 1328
WIRE 1088 1360 1088 1328
WIRE 656 1440 624 1440
WIRE 736 1440 720 1440
WIRE 1024 1440 1024 1248
WIRE 1024 1440 992 1440
WIRE 3056 1440 3056 1424
WIRE 3152 1440 3152 1376
WIRE 624 1504 624 1440
WIRE 864 1520 864 1504
WIRE 3008 1536 2992 1536
WIRE 3120 1536 3088 1536
WIRE 3136 1536 3120 1536
WIRE 3408 1536 3216 1536
WIRE 3456 1536 3408 1536
WIRE 3120 1584 3120 1536
WIRE 3408 1616 3408 1536
WIRE 3120 1696 3120 1664
WIRE 2880 1744 2832 1744
WIRE 3024 1744 2960 1744
WIRE 3056 1744 3024 1744
WIRE 3024 1760 3024 1744
WIRE 3024 1856 3024 1840
WIRE 3120 1856 3120 1792
FLAG 1296 288 0
FLAG 320 256 0
FLAG 48 336 0
FLAG -256 416 0
FLAG 2112 800 0
FLAG 2112 944 0
FLAG 1456 288 0
FLAG -176 -144 UMBILICAL
FLAG 128 -64 BATT_1
FLAG 368 16 BATT_2
FLAG 1088 560 0
FLAG 880 848 0
FLAG 1472 160 Umbilical_comparator
FLAG 1264 432 BATT_1_comparator
FLAG 1056 720 BATT_2_comparator
FLAG 1680 704 Umbilical_comparator
FLAG 1648 848 BATT_1_comparator
FLAG 1472 976 BATT_2_comparator
FLAG 688 304 LDO_POWER
FLAG 864 1520 0
FLAG 1088 1360 0
FLAG 624 1504 0
FLAG 656 1248 LDO_POWER
FLAG 1184 1248 LOGIC_POWER
FLAG 1472 1008 LOGIC_POWER
FLAG 1824 608 Umbilical_gate_control_signal
FLAG 2096 224 0
FLAG 1760 -160 Umbilical_gate_signal
FLAG 1760 -144 BATT_1_gate_signal
FLAG 1760 -128 BATT_2_gate_signal
FLAG 1792 -48 0
FLAG 2512 -112 LOGIC_POWER
FLAG 2688 64 Umbilical_gate_signal
FLAG 2688 144 BATT_1_gate_signal
FLAG 2688 224 BATT_2_gate_signal
FLAG 2496 224 0
FLAG 2176 608 BATT_1_gate_control_signal
FLAG 2528 608 BATT_2_gate_control_signal
FLAG 3072 976 0
FLAG 3168 976 0
FLAG 3504 592 UMBILICAL_GATE
FLAG 2880 864 Umbilical_gate_control_signal
FLAG 3040 592 UMBILICAL
FLAG 3456 736 0
FLAG 3056 1440 0
FLAG 3152 1440 0
FLAG 3440 1264 0
FLAG 3024 1856 0
FLAG 3120 1856 0
FLAG 3408 1680 0
FLAG 2864 1328 BATT_1_gate_control_signal
FLAG 3488 1120 BATT_1_GATE
FLAG 2832 1744 BATT_2_gate_control_signal
FLAG 3456 1536 BATT_2_GATE
FLAG 3024 1120 BATT_1
FLAG 2992 1536 BATT_2
FLAG 3344 736 0
FLAG 1248 560 0
FLAG 1040 848 0
SYMBOL voltage -256 320 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 24 96 Left 1
SYMATTR Value PULSE(0 48 0 100m 20m 200m 5 1)
SYMATTR InstName UMBILICAL
SYMBOL voltage 48 240 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 24 96 Left 1
SYMATTR Value PULSE(0 16.8 20m 100m 100m 500m 5 1)
SYMATTR InstName BATT_1
SYMBOL voltage 320 160 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 24 96 Left 1
SYMATTR Value PULSE(0 16.8 0 20u 0.1 10 11 1)
SYMATTR InstName BATT_2
SYMBOL res 1280 32 R0
SYMATTR InstName R1
SYMATTR Value 10000
SYMBOL res 1280 176 R0
SYMATTR InstName R2
SYMATTR Value 1750
SYMBOL cap 1472 208 M0
WINDOW 3 -50 49 Left 2
WINDOW 0 -21 10 Left 2
SYMATTR Value 100n
SYMATTR InstName C2
SYMBOL Digital\\diffschmitt 1536 928 R0
WINDOW 3 303 112 Right 1
SYMATTR Value Trise=1u, Vhigh = 5, Vt = 0.1, Vh = 0.05
SYMATTR InstName A7
SYMBOL Digital\\diffschmitt 1712 800 R0
WINDOW 3 170 115 Right 1
SYMATTR Value Trise=1u, Vhigh = 5, Vt = 0.1, Vh = 0.05
SYMATTR InstName A8
SYMBOL Digital\\diffschmitt 1728 656 R0
WINDOW 3 293 109 Right 1
SYMATTR Value Trise=1u, Vhigh = 5, Vt = 0.05, Vh = 0.075, Td = 10n
SYMATTR InstName A9
SYMBOL res 1328 144 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 1000
SYMBOL bv -256 176 R0
WINDOW 3 24 96 Left 1
SYMATTR Value V=white(2e4*time) / 13
SYMATTR InstName UMBILICAL_Noise
SYMBOL bv 48 112 R0
WINDOW 3 24 96 Left 1
SYMATTR Value V=white(2e4*time) / 13
SYMATTR InstName BATT_1_Noise
SYMBOL bv 320 32 R0
WINDOW 3 24 96 Left 1
SYMATTR Value V=white(2e4*time) / 13
SYMATTR InstName BATT_2_Noise
SYMBOL res 1072 304 R0
SYMATTR InstName R3
SYMATTR Value 10000
SYMBOL res 1072 448 R0
SYMATTR InstName R4
SYMATTR Value 5400
SYMBOL res 864 592 R0
SYMATTR InstName R6
SYMATTR Value 10000
SYMBOL res 864 736 R0
SYMATTR InstName R12
SYMATTR Value 5400
SYMBOL cap 720 1424 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C7
SYMATTR Value 1n
SYMBOL cap 1072 1264 R0
SYMATTR InstName C8
SYMATTR Value 4.7µ
SYMATTR SpiceLine Rser=1.5m
SYMBOL ADM7170-5.0 864 1344 R0
SYMATTR InstName U1
SYMBOL Digital\\diffschmitt 2304 -64 R0
WINDOW 3 165 -8 Right 0
SYMATTR Value Trise=1u, Vhigh = 5, Vt = 0.1, Vh = 0.05, Vlow = -10
SYMATTR InstName A3
SYMBOL res 1952 -128 R0
SYMATTR InstName R16
SYMATTR Value 10000
SYMBOL res 1952 -16 R0
SYMATTR InstName R17
SYMATTR Value 9000
SYMBOL res 2160 -16 R0
SYMATTR InstName R18
SYMATTR Value 5000
SYMBOL res 2160 96 R0
SYMATTR InstName R19
SYMATTR Value 20000
SYMBOL cap 2080 112 R0
SYMATTR InstName C9
SYMATTR Value 1µ
SYMBOL pmos 2448 96 M180
SYMATTR InstName M1
SYMBOL cap 2384 128 R0
SYMATTR InstName C10
SYMATTR Value 1p
SYMBOL Digital\\and 1824 -192 R0
WINDOW 3 -44 3 Left 2
SYMATTR Value Vhigh = 2
SYMATTR InstName A6
SYMBOL schottky 2624 240 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D5
SYMBOL schottky 2624 160 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D6
SYMBOL schottky 2624 80 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D7
SYMBOL res 2480 128 R0
SYMATTR InstName R20
SYMATTR Value 15000
SYMBOL res 2288 112 R0
SYMATTR InstName R21
SYMATTR Value 1000
SYMBOL schottky 2160 -112 R0
SYMATTR InstName D11
SYMBOL diode 752 192 R0
SYMATTR InstName D1
SYMBOL diode 672 192 R0
SYMATTR InstName D2
SYMBOL diode 592 192 R0
SYMATTR InstName D4
SYMBOL res 3168 608 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R7
SYMATTR Value 1000
SYMBOL zener 3184 704 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D8
SYMATTR Value DFLZ33
SYMBOL npn 3104 816 R0
WINDOW 0 15 -12 Left 2
SYMATTR InstName Q2
SYMBOL res 2912 848 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R15
SYMATTR Value 1000
SYMBOL res 3088 864 M0
SYMATTR InstName R22
SYMATTR Value 10000
SYMBOL res 3152 576 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 10000
SYMBOL cap 3440 672 R0
SYMATTR InstName C5
SYMATTR Value 10n
SYMBOL Digital\\and 2128 672 R0
WINDOW 3 10 105 Left 1
SYMATTR Value Vhigh = 5, Td = 33n
SYMATTR InstName A1
SYMBOL Digital\\and 2128 816 R0
WINDOW 3 10 105 Left 1
SYMATTR Value Vhigh = 5, Td = 33n
SYMATTR InstName A2
SYMBOL res 3152 1136 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R9
SYMATTR Value 1000
SYMBOL npn 3088 1280 R0
WINDOW 0 15 -12 Left 2
SYMATTR InstName Q1
SYMBOL res 2896 1312 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 1000
SYMBOL res 3072 1328 M0
SYMATTR InstName R14
SYMATTR Value 10000
SYMBOL res 3136 1104 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R23
SYMATTR Value 10000
SYMBOL cap 3424 1200 R0
SYMATTR InstName C1
SYMATTR Value 10n
SYMBOL res 3120 1552 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R24
SYMATTR Value 1000
SYMBOL npn 3056 1696 R0
WINDOW 0 15 -12 Left 2
SYMATTR InstName Q3
SYMBOL res 2864 1728 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R25
SYMATTR Value 1000
SYMBOL res 3040 1744 M0
SYMATTR InstName R26
SYMATTR Value 10000
SYMBOL res 3104 1520 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R27
SYMATTR Value 10000
SYMBOL cap 3392 1616 R0
SYMATTR InstName C6
SYMATTR Value 10n
SYMBOL res 3136 1152 R0
SYMATTR InstName R28
SYMATTR Value 0.1
SYMBOL res 3104 1568 R0
SYMATTR InstName R29
SYMATTR Value 0.1
SYMBOL res 3152 704 R0
SYMATTR InstName R30
SYMATTR Value 0.1
SYMBOL res 3328 640 R0
SYMATTR InstName R31
SYMATTR Value 10e4
SYMBOL cap 1264 480 M0
WINDOW 3 -50 49 Left 2
WINDOW 0 -36 11 Left 2
SYMATTR Value 100n
SYMATTR InstName C11
SYMBOL res 1120 416 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R32
SYMATTR Value 1000
SYMBOL cap 1056 768 M0
WINDOW 3 -50 49 Left 2
WINDOW 0 -36 13 Left 2
SYMATTR Value 100n
SYMATTR InstName C12
SYMBOL res 912 704 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R33
SYMATTR Value 1000
TEXT -256 -200 Left 2 !.tran 1
TEXT 2528 -16 Left 2 ;Something with small voltage drop to fully act as a high side switch
TEXT 3256 432 Left 2 ;Extra pull up resistors so the gate wont be floating if it is disconected somehow
TEXT 3256 392 Left 2 ;Diodes to get a gradual turn on (for delaying purposes)
TEXT 1552 1112 Left 2 ;Need to switch all the output signals to not invert the signal
TEXT 3704 560 Left 2 ;Ask if this extra pull up resistor is nessary
TEXT 3600 888 Left 2 ;Extra cap so that negitive voltage spike when the npn turns on doesn't affect the gate voltage
TEXT 3248 888 Left 2 ;NPN needs to resist like upwards of 50V
TEXT 3320 792 Left 2 ;Extra pull down so when the umbilical is disconected, the gate wont be in a high impedance state
TEXT 1432 104 Left 2 ;common switch debouncing values
