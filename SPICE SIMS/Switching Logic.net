* E:\Outpost Vault\Outpost Door\Outpost Quick Access\Projects\1) Major Projects\Work for SOAR\PMB REV 2\Code\SOAR_PMB_Rev_2\SPICE SIMS\Switching Logic.asc
* Generated by LTspice 24.1.4 for Windows.
V§UMBILICAL N028 0 PULSE(0 48 0 10m 4m 200m 5 1)
V§BATT_1 N025 0 PULSE(0 16.8 0 10m 10m 500m 5 1)
V§BATT_2 N023 0 PULSE(0 16.8 0 10m 100m 10 11 1)
R1 UMBILICAL N022 100000
R2 N022 0 13000
C2 Umbilical_comparator 0 10n
R8 N022 Umbilical_comparator 330
B§UMBILICAL_Noise UMBILICAL N028 V=white(2e4*time) / 13
BATT_1_Noise BATT_1 N025 V=white(2e4*time) / 13
BATT_2_Noise BATT_2 N023 V=white(2e4*time) / 13
R4 N031 0 33000
C7 N039 0 1n
C8 N033 0 4.7µ Rser=1.5m
X§U1 LDO_POWER N033 LDO_POWER N039 N033 0 ADM7170-5.0
D4 UMBILICAL LDO_POWER MMSD4148
R55 0 OUTPUT_RAIL 10
C1 N036 0 100µ
X§U7 N009 RESET_CLK NC_01 NC_02 NC_03 N010 SN74LVC1G332DBVR
X§U11 Deny_Signal Umbilical_gate_control_logic_output N019 N019 N019 N014 SN74LVC1G08DBVR
C13 LOGIC_POWER 0 1µ
C14 LOGIC_POWER 0 1µ
C16 LOGIC_POWER 0 1µ
C17 LOGIC_POWER 0 1µ
C24 LOGIC_POWER 0 1µ
C25 LOGIC_POWER 0 1µ
C26 LOGIC_POWER 0 0.1µ
C27 LOGIC_POWER 0 0.1µ
C28 LOGIC_POWER 0 0.1µ
C29 LOGIC_POWER 0 0.1µ
C30 LOGIC_POWER 0 0.1µ
C31 LOGIC_POWER 0 0.1µ
C3 LOGIC_POWER 0 1µ
C4 LOGIC_POWER 0 1µ
C37 LOGIC_POWER 0 0.1µ
C38 LOGIC_POWER 0 0.1µ
C5 LOGIC_POWER 0 1µ
C6 LOGIC_POWER 0 1µ
C9 LOGIC_POWER 0 1µ
C32 LOGIC_POWER 0 1µ
C39 LOGIC_POWER 0 0.1µ
C40 LOGIC_POWER 0 0.1µ
C41 LOGIC_POWER 0 0.1µ
C42 LOGIC_POWER 0 0.1µ
R13 LOGIC_POWER N033 0.001
D1 BATT_1 LDO_POWER MMSD4148
D2 BATT_2 LDO_POWER MMSD4148
X§U15 LOGIC_POWER N006 0 Umbilical_gate_control_logic_output N007 N003 N005 N002 N004 LTC7001
R11 N006 0 67857
C18 N002 N004 250n
M4 N001 N003 N002 N002 IPA180N10N3
M5 OUTPUT_RAIL N003 N002 N002 IPA180N10N3
D7 LOGIC_POWER N004 RF071MM2S
R19 N003 N005 2000
C20 N008 0 20n
R20 N003 N008 10
X§U14 LOGIC_POWER N026 0 BATT_1_gate_control_logic_output N029 N013 N024 N012 N018 LTC7001
C19 N012 N018 250n
M2 N011 N013 N012 N012 IPA180N10N3
M3 OUTPUT_RAIL N013 N012 N012 IPA180N10N3
D3 LOGIC_POWER N018 RF071MM2S
R15 N013 N024 2000
C21 N030 0 20n
R17 N013 N030 10
X§U16 LOGIC_POWER N042 0 BATT_2_gate_control_signal_logic_output N043 N038 N041 N035 N040 LTC7001
C22 N035 N040 250n
M8 N034 N038 N035 N035 IPA180N10N3
M9 OUTPUT_RAIL N038 N035 N035 IPA180N10N3
D8 LOGIC_POWER N040 RF071MM2S
R23 N038 N041 2000
C23 N044 0 20n
R24 N038 N044 10
D9 0 N002 D
D10 0 N012 D
D11 0 N035 D
R5 N007 Deny_Signal 1000
R10 0 N007 1000
D12 0 N007 UMZ5_1N
R14 N026 0 67857
R18 N029 Deny_Signal 1000
R21 0 N029 1000
D13 0 N029 UMZ5_1N
R22 N042 0 67857
R25 N043 Deny_Signal 1000
R26 0 N043 1000
D14 0 N043 UMZ5_1N
R27 N001 UMBILICAL 0.00001
R28 N011 BATT_1 0.00001
R29 N034 BATT_2 0.00001
C33 LOGIC_POWER 0 1µ
C34 LOGIC_POWER 0 1µ
C35 LOGIC_POWER 0 1µ
C43 LOGIC_POWER 0 0.1µ
C44 LOGIC_POWER 0 0.1µ
C45 LOGIC_POWER 0 0.1µ
C36 N036 0 100n
C46 N036 0 100p
R30 N036 OUTPUT_RAIL 0.00001
X§U17 Umbilical_turn_on BATT_1_turn_on BATT_2_turn_on BATT_2_turn_on BATT_2_turn_on N009 SN74LVC1G332DBVR
R3 BATT_1 N031 68000
C11 BATT_1_comparator 0 10n
R31 N031 BATT_1_comparator 330
R32 N037 0 33000
C47 BATT_2_comparator 0 10n
R34 N037 BATT_2_comparator 330
R6 BATT_2 N037 68000
X§U2 5V N009 N010 RESET_GATE Deny_Signal NC_04 SN74LVC2G74DCUR
X§U4 5V Umbilical_gate_control_logic_output Umbilical_gate_control_logic_output N050 Umbilical_turn_on NC_05 SN74LVC2G74DCUR
C12 N049 0 230p
R16 N049 Umbilical_gate_control_logic_output 25000
R33 Umbilical_gate_control_logic_output 0 66000
X§U6 5V BATT_1_gate_control_logic_output BATT_1_gate_control_logic_output N052 BATT_1_turn_on NC_06 SN74LVC2G74DCUR
C48 N051 0 230p
R35 N051 BATT_1_gate_control_logic_output 25000
R36 BATT_1_gate_control_logic_output 0 66000
X§U19 5V BATT_2_gate_control_signal_logic_output BATT_2_gate_control_signal_logic_output N054 BATT_2_turn_on NC_07 SN74LVC2G74DCUR
C49 N053 0 230p
R37 N053 BATT_2_gate_control_signal_logic_output 25000
R38 BATT_2_gate_control_signal_logic_output 0 66000
X§U21 N053 N054 SN74LVC1G14DBVR
X§U22 N051 N052 SN74LVC1G14DBVR
V2 5V 0 5
X§U5 N049 N050 SN74LVC1G14DBVR
X§U18 Umbilical_comparator LOGIC_POWER LOGIC_POWER Umbilical_gate_control_logic_output TLV1851DBVR
X§U20 BATT_1_comparator LOGIC_POWER LOGIC_POWER N046 TLV1851DBVR
X§U23 BATT_2_comparator LOGIC_POWER LOGIC_POWER N048 TLV1851DBVR
X§U24 N045 N046 N046 N046 N046 BATT_1_gate_control_logic_output SN74LVC1G08DBVR
X§U25 N045 N047 N048 N048 N048 BATT_2_gate_control_signal_logic_output SN74LVC1G08DBVR
X§U26 Umbilical_gate_control_logic_output N045 SN74LVC1G14DBVR
X§U27 N046 N047 SN74LVC1G14DBVR
X§U12 UMBILICAL OUTPUT_RAIL LOGIC_POWER N019 TLV1851DBVR
X§U13 Deny_Signal BATT_1_gate_control_logic_output N027 N027 N027 N017 SN74LVC1G08DBVR
X§U28 BATT_1 OUTPUT_RAIL LOGIC_POWER N027 TLV1851DBVR
X§U29 Deny_Signal BATT_2_gate_control_signal_logic_output N032 N032 N032 N020 SN74LVC1G08DBVR
X§U30 BATT_2 OUTPUT_RAIL LOGIC_POWER N032 TLV1851DBVR
C50 RESET_CLK 0 17n
R40 RESET_CLK N016 5000
R41 N016 0 33000
R42 N016 N015 0.00001
X§U31 N014 N017 N020 NC_08 NC_09 N015 SN74LVC1G332DBVR
C51 N021 0 9n
R43 N021 N016 5000
X§U32 N021 RESET_GATE SN74LVC1G14DBVR
.model D D
.lib C:\Users\reinz\AppData\Local\LTspice\lib\cmp\standard.dio
.model NMOS NMOS
.model PMOS PMOS
.lib C:\Users\reinz\AppData\Local\LTspice\lib\cmp\standard.mos
.tran 800m
* Need to switch all the output signals to not invert the signal
* common switch debouncing values
* ORing diodes or or gate, this needs to supply some current to turn on the transmission gate so idk?
* Maybe use transmission gates here or something (single rail transmission gates)
* If the propogation delay is high, then the and gate wont read a fast switch over event, maybe add some sort of delay so down time is more easier to detect.
* Any decoupling capacitors here?
* Voltage divider so when the umbilical falls below 30V this switches off
* AND Gate power bypass caps
* OR Gate power bypass caps
* Schmitt inverter power bypass caps
* LTC7001 power bypass caps
.lib ADM7170-5.0.sub
.lib LTC7001.sub
.lib SN74LVC1G08DBVR.sub
.lib SN74LVC1G14DBVR.sub
.lib SN74LVC1G332DBVR.sub
.lib SN74LVC2G74DCUR.sub
.lib TLV1851DBVR.sub
.backanno
.end
