* E:\Outpost Vault\Outpost Door\Outpost Quick Access\Projects\1) Major Projects\Work for SOAR\PMB REV 2\Code\SOAR_PMB_Rev_2\SPICE SIMS\Switching Logic.asc
* Generated by LTspice 24.1.4 for Windows.
V§UMBILICAL N025 0 PULSE(0 48 0 100m 20m 200m 5 1)
V§BATT_1 N024 0 PULSE(0 16.8 20m 100m 100m 500m 5 1)
V§BATT_2 N023 0 PULSE(0 16.8 0 20u 0.1 10 11 1)
R1 UMBILICAL N022 10000
R2 N022 0 1750
C2 Umbilical_comparator 0 100n
A7 BATT_2_comparator LOGIC_POWER 0 0 0 0 N037 0 SCHMITT Trise=1u, Vhigh = 5, Vt = 0.1, Vh = 0.05
A8 BATT_1_comparator LOGIC_POWER 0 0 0 N036 N035 0 SCHMITT Trise=1u, Vhigh = 5, Vt = 0.1, Vh = 0.05
A9 Umbilical_comparator LOGIC_POWER 0 0 0 N033 Umbilical_gate_control_signal 0 SCHMITT Trise=1u, Vhigh = 5, Vt = 0.05, Vh = 0.075, Td = 10n
R8 N022 Umbilical_comparator 1000
B§UMBILICAL_Noise UMBILICAL N025 V=white(2e4*time) / 13
BATT_1_Noise BATT_1 N024 V=white(2e4*time) / 13
BATT_2_Noise BATT_2 N023 V=white(2e4*time) / 13
R3 BATT_1 N026 10000
R4 N026 0 5400
R6 BATT_2 N028 10000
R12 N028 0 5400
C7 N030 0 1n
C8 LOGIC_POWER 0 4.7µ Rser=1.5m
X§U1 LDO_POWER LOGIC_POWER LDO_POWER N030 LOGIC_POWER 0 ADM7170-5.0
A3 N017 N019 0 0 0 N020 0 0 SCHMITT Trise=1u, Vhigh = 5, Vt = 0.1, Vh = 0.05, Vlow = -10
R16 N016 N017 10000
R17 N017 0 9000
R18 N018 N019 5000
R19 N019 0 20000
C9 N019 0 1µ
M1 N021 N020 LOGIC_POWER LOGIC_POWER PMOS
C10 N020 0 1p
A6 Umbilical_gate_signal BATT_1_gate_signal BATT_2_gate_signal 0 0 0 N016 0 AND Vhigh = 2
D5 N021 BATT_2_gate_signal D
D6 N021 BATT_1_gate_signal D
D7 N021 Umbilical_gate_signal D
R20 N021 0 15000
R21 N020 0 1000
D11 N016 N018 D
R7 N027 UMBILICAL_GATE 220
D8 N029 N027 DFLZ33
Q2 N031 N032 0 0 NPN
R15 Umbilical_gate_control_signal N032 1000
R22 N032 0 10000
R11 N027 UMBILICAL 10000
C5 UMBILICAL_GATE 0 10n
A1 N033 0 0 0 N035 0 BATT_1_gate_control_signal 0 AND Vhigh = 5, Td = 33n
A2 N033 0 N036 0 N037 0 BATT_2_gate_control_signal 0 AND Vhigh = 5, Td = 33n
R9 N034 BATT_1_GATE 1000
Q1 N038 N039 0 0 NPN
R10 BATT_1_gate_control_signal N039 1000
R14 N039 0 10000
R23 N034 BATT_1 10000
C1 BATT_1_GATE 0 10n
R24 N040 BATT_2_GATE 220
Q3 N041 N042 0 0 NPN
R25 BATT_2_gate_control_signal N042 1000
R26 N042 0 10000
R27 N040 BATT_2 10000
C6 BATT_2_GATE 0 10n
R28 N034 N038 0.1
R29 N040 N041 0.1
R30 N029 N031 0.1
R31 UMBILICAL_GATE 0 10e4
C11 BATT_1_comparator 0 100n
R32 N026 BATT_1_comparator 1000
C12 BATT_2_comparator 0 100n
R33 N028 BATT_2_comparator 1000
D1 UMBILICAL LDO_POWER D
D2 BATT_1 LDO_POWER D
D4 BATT_2 LDO_POWER D
C3 BATT_1_gate_control_signal 0 10p
C4 Umbilical_gate_control_signal 0 10p
C13 BATT_2_gate_control_signal 0 10p
S3 NC_13 NC_14 NC_15 NC_16 MySwitch
A4 Umbilical_gate_control_signal BATT_1_gate_control_signal BATT_2_gate_control_signal 0 0 N004 0 0 AND Vhigh = 5, Td = 33n
A5 N004 0 Umbilical_gate_control_signal 0 N011 N007 0 0 AND Vhigh = 5, Td = 33n
A12 UMBILICAL BUCK_RAIL 0 0 0 0 N011 0 SCHMITT Trise=1u, Vhigh = 5, Vt = 0.05, Vh = 0.075, Td = 10n
M2 N006 UMBILICAL_GATE UMBILICAL UMBILICAL PMOS
M3 N006 BATT_1_GATE BATT_1 BATT_1 PMOS
M4 N006 BATT_2_GATE BATT_2 BATT_2 PMOS
R5_Rdson BUCK_RAIL N006 0.2
D3 N007 N008 D
S5 Umbilical_gate_control_signal Umbilical_gate_control_logic_output N005 0 MySwitch
S6 BATT_1_gate_control_signal BATT_1_gate_control_logic_output N005 0 MySwitch
S7 BATT_2_gate_control_signal BATT_2_gate_control_signal_logic_output N005 0 MySwitch
A10 N001 0 Umbilical_gate_control_signal 0 N003 N002 0 0 AND Vhigh = 5, Td = 33n
A11 UMBILICAL BUCK_RAIL 0 0 0 0 N003 0 SCHMITT Trise=1u, Vhigh = 5, Vt = 0.05, Vh = 0.075, Td = 10n
D9 N002 NC_23 D
A13 N004 0 Umbilical_gate_control_signal 0 N013 N012 0 0 AND Vhigh = 5, Td = 33n
A14 UMBILICAL BUCK_RAIL 0 0 0 0 N013 0 SCHMITT Trise=1u, Vhigh = 5, Vt = 0.05, Vh = 0.075, Td = 10n
D10 N012 N008 D
A15 N004 0 Umbilical_gate_control_signal 0 N015 N014 0 0 AND Vhigh = 5, Td = 33n
A16 UMBILICAL BUCK_RAIL 0 0 0 0 N015 0 SCHMITT Trise=1u, Vhigh = 5, Vt = 0.05, Vh = 0.075, Td = 10n
D12 N014 N008 D
C14 N005 0 3n
S1 gate_drive_switch_signal N004 N010 0 MySwitch
R5 N010 N009 1000
C15 N009 0 50n
R13 N009 N008 100
R34 N005 gate_drive_switch_signal 1000
R35 N005 0 10000
.model D D
.lib C:\Users\reinz\AppData\Local\LTspice\lib\cmp\standard.dio
.model NPN NPN
.model PNP PNP
.lib C:\Users\reinz\AppData\Local\LTspice\lib\cmp\standard.bjt
.model NMOS NMOS
.model PMOS PMOS
.lib C:\Users\reinz\AppData\Local\LTspice\lib\cmp\standard.mos
.tran 1
* Something with small voltage drop to fully act as a high side switch
* Extra pull up resistors so the gate wont be floating if it is disconected somehow
* Diodes to get a gradual turn on (for delaying purposes)
* Need to switch all the output signals to not invert the signal
* Ask if this extra pull up resistor is nessary
* Extra cap so that negitive voltage spike when the npn turns on doesn't affect the gate voltage
* NPN needs to resist like upwards of 50V
* Extra pull down so when the umbilical is disconected, the gate wont be in a high impedance state
* common switch debouncing values
* ORing diodes or or gate, this needs to supply some current to turn on the transmission gate so idk?
.model MySwitch SW(Ron=.1 Roff=1Meg Vt=0 Vh=-.5 Lser=10n Vser=.6)
.lib ADM7170-5.0.sub
.backanno
.end
