* E:\Outpost Vault\Outpost Door\Outpost Quick Access\Projects\1) Major Projects\Work for SOAR\PMB REV 2\Code\SOAR_PMB_Rev_2\SPICE SIMS\Switching Logic.asc
* Generated by LTspice 24.1.4 for Windows.
V§UMBILICAL N030 0 PULSE(0 48 0 10m 4m 200m 5 1)
V§BATT_1 N028 0 PULSE(0 16.8 0 10m 10m 500m 5 1)
V§BATT_2 N026 0 PULSE(0 16.8 0 10m 100m 10 11 1)
R1 UMBILICAL N025 10000
R2 N025 0 1250
C2 Umbilical_comparator 0 100n
A9 Umbilical_comparator LOGIC_POWER 0 0 0 N048 Umbilical_gate_control_logic_output 0 SCHMITT Trise=2.5n, Vhigh = 5, Vt = 0.05, Vh = 0.075, Td = 5u
R8 N025 Umbilical_comparator 1000
B§UMBILICAL_Noise UMBILICAL N030 V=white(2e4*time) / 13
BATT_1_Noise BATT_1 N028 V=white(2e4*time) / 13
BATT_2_Noise BATT_2 N026 V=white(2e4*time) / 13
R3 BATT_1 N033 10000
R4 N033 0 4500
R6 BATT_2 N038 10000
R12 N038 0 4500
C7 N040 0 1n
C8 N034 0 4.7µ Rser=1.5m
X§U1 LDO_POWER N034 LDO_POWER N040 N034 0 ADM7170-5.0
C11 BATT_1_comparator 0 100n
R32 N033 BATT_1_comparator 1000
C12 BATT_2_comparator 0 100n
R33 N038 BATT_2_comparator 1000
D4 UMBILICAL LDO_POWER MMSD4148
A12 UMBILICAL OUTPUT_RAIL 0 0 0 0 N004 0 SCHMITT Trise=1u, Vhigh = 5, Vt = 0.05, Vh = 0.075, Td = 10n
A14 BATT_1 OUTPUT_RAIL 0 0 0 0 N012 0 SCHMITT Trise=1u, Vhigh = 5, Vt = 0.05, Vh = 0.075, Td = 10n
A16 BATT_2 OUTPUT_RAIL 0 0 0 0 N016 0 SCHMITT Trise=1u, Vhigh = 5, Vt = 0.05, Vh = 0.075, Td = 10n
C10 RESET_GATE 0 9n
R36 RESET_GATE N005 5000
R16 N015 N005 1000
A11 N001 0 N002 0 RESET_GATE 0 Deny_Signal 0 DFLOP Vhigh = 5
D5 RESET_GATE N015 D
C15 RESET_CLK 0 17n
R39 RESET_CLK N005 5000
R40 N006 N005 1000
D6 RESET_CLK N006 D
R55 0 OUTPUT_RAIL 10
C1 N037 0 100µ
R7 N005 0 33000
R9 N005 N008 0.001
X§U7 N001 RESET_CLK NC_14 NC_15 NC_16 N002 SN74LVC1G332DBVR
X§U8 N003 N007 N013 NC_17 NC_18 N008 SN74LVC1G332DBVR
X§U9 Deny_Signal BATT_2_gate_control_signal_logic_output N016 N016 N016 N013 SN74LVC1G08DBVR
X§U10 Deny_Signal BATT_1_gate_control_logic_output N012 N012 N012 N007 SN74LVC1G08DBVR
X§U11 Deny_Signal Umbilical_gate_control_logic_output N004 N004 N004 N003 SN74LVC1G08DBVR
X§U12 N048 N051 N052 N052 N052 BATT_2_gate_control_signal_logic_output SN74LVC1G08DBVR
X§U13 N048 N049 N049 N049 N049 BATT_1_gate_control_logic_output SN74LVC1G08DBVR
C13 LOGIC_POWER 0 1µ
C14 LOGIC_POWER 0 1µ
C16 LOGIC_POWER 0 1µ
C17 LOGIC_POWER 0 1µ
C24 LOGIC_POWER 0 1µ
C25 LOGIC_POWER 0 1µ
C26 LOGIC_POWER 0 0.1µ
C27 LOGIC_POWER 0 0.1µ
C28 LOGIC_POWER 0 0.1µ
C29 LOGIC_POWER 0 0.1µ
C30 LOGIC_POWER 0 0.1µ
C31 LOGIC_POWER 0 0.1µ
C3 LOGIC_POWER 0 1µ
C4 LOGIC_POWER 0 1µ
C37 LOGIC_POWER 0 0.1µ
C38 LOGIC_POWER 0 0.1µ
C5 LOGIC_POWER 0 1µ
C6 LOGIC_POWER 0 1µ
C9 LOGIC_POWER 0 1µ
C32 LOGIC_POWER 0 1µ
C39 LOGIC_POWER 0 0.1µ
C40 LOGIC_POWER 0 0.1µ
C41 LOGIC_POWER 0 0.1µ
C42 LOGIC_POWER 0 0.1µ
R13 LOGIC_POWER N034 0.001
D1 BATT_1 LDO_POWER MMSD4148
D2 BATT_2 LDO_POWER MMSD4148
X§U15 LOGIC_POWER N018 0 Umbilical_gate_control_logic_output N019 N011 N017 N010 N014 LTC7001
R11 N018 0 67857
C18 N010 N014 250n
M4 N009 N011 N010 N010 IPA180N10N3
M5 OUTPUT_RAIL N011 N010 N010 IPA180N10N3
D7 LOGIC_POWER N014 RF071MM2S
R19 N011 N017 2000
C20 N020 0 20n
R20 N011 N020 10
X§U14 LOGIC_POWER N029 0 BATT_1_gate_control_logic_output N031 N023 N027 N022 N024 LTC7001
C19 N022 N024 250n
M2 N021 N023 N022 N022 IPA180N10N3
M3 OUTPUT_RAIL N023 N022 N022 IPA180N10N3
D3 LOGIC_POWER N024 RF071MM2S
R15 N023 N027 2000
C21 N032 0 20n
R17 N023 N032 10
X§U16 LOGIC_POWER N043 0 BATT_2_gate_control_signal_logic_output N044 N039 N042 N036 N041 LTC7001
C22 N036 N041 250n
M8 N035 N039 N036 N036 IPA180N10N3
M9 OUTPUT_RAIL N039 N036 N036 IPA180N10N3
D8 LOGIC_POWER N041 RF071MM2S
R23 N039 N042 2000
C23 N045 0 20n
R24 N039 N045 10
D9 0 N010 D
D10 0 N022 D
D11 0 N036 D
R5 N019 Deny_Signal 1000
R10 0 N019 1000
D12 0 N019 UMZ5_1N
R14 N029 0 67857
R18 N031 Deny_Signal 1000
R21 0 N031 1000
D13 0 N031 UMZ5_1N
R22 N043 0 67857
R25 N044 Deny_Signal 1000
R26 0 N044 1000
D14 0 N044 UMZ5_1N
R27 N009 UMBILICAL 0.00001
R28 N021 BATT_1 0.00001
R29 N035 BATT_2 0.00001
C33 LOGIC_POWER 0 1µ
C34 LOGIC_POWER 0 1µ
C35 LOGIC_POWER 0 1µ
C43 LOGIC_POWER 0 0.1µ
C44 LOGIC_POWER 0 0.1µ
C45 LOGIC_POWER 0 0.1µ
C36 N037 0 100n
C46 N037 0 100p
R30 N037 OUTPUT_RAIL 0.00001
A3 Umbilical_gate_control_logic_output 0 Umbilical_gate_control_logic_output 0 P001 0 Umbilical_turn_on 0 DFLOP Vhigh = 5, Vt = 2.5
R37 N046 Umbilical_gate_control_logic_output 25000
R38 P002 Umbilical_gate_control_logic_output 220
D16 N046 P002 D
C48 N046 0 230p
R41 Umbilical_gate_control_logic_output 0 66000
A4 N046 0 0 0 0 0 P001 0 SCHMITT Vt =2.5 Vh = 0.5, Vhigh = 5, Trise = 2.5n
A5 BATT_1_gate_control_logic_output 0 BATT_1_gate_control_logic_output 0 P003 0 BATT_1_turn_on 0 DFLOP Vhigh = 5, Vt = 2.5
R42 N047 BATT_1_gate_control_logic_output 25000
R43 P004 BATT_1_gate_control_logic_output 220
D17 N047 P004 D
C49 N047 0 230p
R44 BATT_1_gate_control_logic_output 0 66000
A6 N047 0 0 0 0 0 P003 0 SCHMITT Vt =2.5 Vh = 0.5, Vhigh = 5, Trise = 2.5n
A10 BATT_2_gate_control_signal_logic_output 0 BATT_2_gate_control_signal_logic_output 0 P005 0 BATT_2_turn_on 0 DFLOP Vhigh = 5, Vt = 2.5
R45 N050 BATT_2_gate_control_signal_logic_output 25000
R46 P006 BATT_2_gate_control_signal_logic_output 220
D18 N050 P006 D
C50 N050 0 230p
R47 BATT_2_gate_control_signal_logic_output 0 66000
A13 N050 0 0 0 0 0 P005 0 SCHMITT Vt =2.5 Vh = 0.5, Vhigh = 5, Trise = 2.5n
A1 BATT_1_comparator LOGIC_POWER 0 0 0 N051 N049 0 SCHMITT Trise=2.5n, Vhigh = 5, Vt = 0.05, Vh = 0.075, Td = 5u
A2 BATT_2_comparator LOGIC_POWER 0 0 0 0 N052 0 SCHMITT Trise=2.5n, Vhigh = 5, Vt = 0.05, Vh = 0.075, Td = 5u
X§U17 Umbilical_turn_on BATT_1_turn_on BATT_2_turn_on BATT_2_turn_on BATT_2_turn_on N001 SN74LVC1G332DBVR
.model D D
.lib C:\Users\reinz\AppData\Local\LTspice\lib\cmp\standard.dio
.model NMOS NMOS
.model PMOS PMOS
.lib C:\Users\reinz\AppData\Local\LTspice\lib\cmp\standard.mos
.tran 800m
* Need to switch all the output signals to not invert the signal
* common switch debouncing values
* ORing diodes or or gate, this needs to supply some current to turn on the transmission gate so idk?
* Maybe use transmission gates here or something (single rail transmission gates)
* If the propogation delay is high, then the and gate wont read a fast switch over event, maybe add some sort of delay so down time is more easier to detect.
* Any decoupling capacitors here?
* Voltage divider so when the umbilical falls below 30V this switches off
* AND Gate power bypass caps
* OR Gate power bypass caps
* Schmitt inverter power bypass caps
* LTC7001 power bypass caps
.lib ADM7170-5.0.sub
.lib LTC7001.sub
.lib SN74LVC1G08DBVR.sub
.lib SN74LVC1G332DBVR.sub
.backanno
.end
