* D:\General Data\Files\Projects\1) Major Projects\SOAR PMB REV 2\Code\SOAR_PMB_Rev_2\SPICE SIMS\Switching Logic.asc
* Generated by LTspice 24.1.4 for Windows.
V§UMBILICAL N010 0 PULSE(0 48 0 400m 20m 100m 5 1)
V§BATT_1 N006 0 PULSE(0 16.8 20m 100m 500u 500m 5 1)
V§BATT_2 N002 0 PULSE(0 16.8 0 20u 0.1 10 11 1)
R1 UMBILICAL Umbilical_comparator 10000
R2 Umbilical_comparator 0 20000
A1 N007 0 0 0 0 N011 0 0 BUF Vhigh = 5
A2 N011 0 0 0 N013 0 N008 0 OR Vhigh = 5, Td = 33n
A4 N011 0 N014 0 N015 0 N009 0 OR Vhigh = 5, Td = 200n
A5 N013 0 0 0 0 N014 0 0 BUF Vhigh = 5
C1 Umbilical_gate_signal 0 500nf
C2 N001 0 500n
A7 BATT_2_comparator LOGIC_POWER 0 0 0 N015 0 0 SCHMITT Trise=1u, Vhigh = 5, Vt = 0.1, Vh = 0.05
A8 BATT_1_comparator LOGIC_POWER 0 0 0 N013 0 0 SCHMITT Trise=1u, Vhigh = 5, Vt = 0.1, Vh = 0.05
A9 Umbilical_comparator LOGIC_POWER 0 0 0 N007 0 0 SCHMITT Trise=1u, Vhigh = 5, Vt = 0.1, Vh = 0.05, Td = 10n
R8 Umbilical_comparator N001 10000
B§UMBILICAL_Noise UMBILICAL N010 V=white(2e4*time) / 13
BATT_1_Noise BATT_1 N006 V=white(2e4*time) / 13
BATT_2_Noise BATT_2 N002 V=white(2e4*time) / 13
R3 BATT_1 BATT_1_comparator 10000
R4 BATT_1_comparator 0 20000
C3 N012 0 500n
R5 BATT_1_comparator N012 10000
R6 BATT_2 BATT_2_comparator 10000
R12 BATT_2_comparator 0 20000
C4 N016 0 250n
R13 BATT_2_comparator N016 5000
R10 N003 N007 220
D4 UMBILICAL LDO_POWER D
D1 BATT_1 LDO_POWER D
D2 BATT_2 LDO_POWER D
C7 N023 0 1n
C8 LOGIC_POWER 0 4.7µ Rser=1.5m
X§U1 LDO_POWER LOGIC_POWER LDO_POWER N023 LOGIC_POWER 0 ADM7170-5.0
R9 Umbilical_gate_signal 0 10000
A3 N018 N020 0 0 0 N021 0 0 SCHMITT Trise=1u, Vhigh = 5, Vt = 0.1, Vh = 0.05, Vlow = -10
R16 N017 N018 10000
R17 N018 0 9000
R18 N019 N020 5000
R19 N020 0 20000
C9 N020 0 1µ
M1 N022 N021 LOGIC_POWER LOGIC_POWER PMOS
C10 N021 0 1p
A6 Umbilical_gate_signal BATT_1_gate_signal BATT_2_gate_signal 0 0 0 N017 0 AND Vhigh = 2
D5 N022 BATT_2_gate_signal D
D6 N022 BATT_1_gate_signal D
D7 N022 Umbilical_gate_signal D
R20 N022 0 15000
R21 N021 0 1000
D11 N017 N019 D
D3 N003 Umbilical_gate_signal D
R23 N007 UMBILICAL 2000
C5 BATT_1_gate_signal 0 500nf
R11 BATT_1_gate_signal 0 10000
D8 N004 BATT_1_gate_signal D
R14 N008 BATT_1 2000
C6 BATT_2_gate_signal 0 500nf
R15 N005 N009 220
R22 BATT_2_gate_signal 0 10000
D9 N005 BATT_2_gate_signal D
R24 N009 BATT_2 2000
R7 N004 N008 220
.model D D
.lib C:\Users\reinz\AppData\Local\LTspice\lib\cmp\standard.dio
.model NMOS NMOS
.model PMOS PMOS
.lib C:\Users\reinz\AppData\Local\LTspice\lib\cmp\standard.mos
.tran 1
* Something with small voltage drop to fully act as a high side switch
* Extra pull up resistors so the gate wont be floating if it is disconected somehow
* Diodes to get a gradual turn on (for delaying purposes)
.lib ADM7170-5.0.sub
.backanno
.end
