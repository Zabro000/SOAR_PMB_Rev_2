* E:\Outpost Vault\Outpost Door\Outpost Quick Access\Projects\1) Major Projects\Work for SOAR\PMB REV 2\Code\SOAR_PMB_Rev_2\SPICE SIMS\Switching Logic.asc
* Generated by LTspice 24.1.4 for Windows.
V§UMBILICAL N053 0 PULSE(0 48 0 10m 4m 200m 5 1)
V§BATT_1 N052 0 PULSE(0 16.8 0 10m 10m 500m 5 1)
V§BATT_2 N051 0 PULSE(0 16.8 0 10m 100m 10 11 1)
R1 N045 N050 10000
R2 N050 0 1250
C2 Umbilical_comparator 0 100n
A7 BATT_2_comparator LOGIC_POWER 0 0 0 0 N072 0 SCHMITT Trise=1u, Vhigh = 5, Vt = 0.1, Vh = 0.05
A8 BATT_1_comparator LOGIC_POWER 0 0 0 N069 N063 0 SCHMITT Trise=1u, Vhigh = 5, Vt = 0.1, Vh = 0.05
A9 Umbilical_comparator LOGIC_POWER 0 0 0 N062 Umbilical_gate_control_logic_output 0 SCHMITT Trise=20u, Vhigh = 5, Vt = 0.05, Vh = 0.075, Td = 5u
R8 N050 Umbilical_comparator 1000
B§UMBILICAL_Noise UMBILICAL N053 V=white(2e4*time) / 13
BATT_1_Noise BATT_1 N052 V=white(2e4*time) / 13
BATT_2_Noise BATT_2 N051 V=white(2e4*time) / 13
R3 N046 N054 10000
R4 N054 0 4500
R6 BATT_2 N057 10000
R12 N057 0 4500
C7 N060 0 1n
C8 LOGIC_POWER 0 4.7µ Rser=1.5m
X§U1 LDO_POWER LOGIC_POWER LDO_POWER N060 LOGIC_POWER 0 ADM7170-5.0
C11 BATT_1_comparator 0 100n
R32 N054 BATT_1_comparator 1000
C12 BATT_2_comparator 0 100n
R33 N057 BATT_2_comparator 1000
D1 BATT_2 LDO_POWER D
D2 BATT_1 LDO_POWER D
D4 UMBILICAL LDO_POWER D
A12 UMBILICAL OUTPUT_RAIL 0 0 0 0 N024 0 SCHMITT Trise=1u, Vhigh = 5, Vt = 0.05, Vh = 0.075, Td = 10n
A14 BATT_1 OUTPUT_RAIL 0 0 0 0 N033 0 SCHMITT Trise=1u, Vhigh = 5, Vt = 0.05, Vh = 0.075, Td = 10n
A16 BATT_2 OUTPUT_RAIL 0 0 0 0 N039 0 SCHMITT Trise=1u, Vhigh = 5, Vt = 0.05, Vh = 0.075, Td = 10n
M7 BATT_2_gate_control_signal N001 BATT_2_gate_control_signal_logic_output BATT_2_gate_control_signal_logic_output Si1555DL_P
M1 BATT_1_gate_control_signal N002 BATT_1_gate_control_logic_output BATT_1_gate_control_logic_output Si1555DL_P
M6 Umbilical_gate_control_signal N003 Umbilical_gate_control_logic_output Umbilical_gate_control_logic_output Si1555DL_P
C10 RESET_GATE 0 9n
R36 RESET_GATE N022 5000
R16 N038 N022 1000
R38 N010 N009 330
R34 N001 SIGNAL_MOSFET 330
R35 N002 SIGNAL_MOSFET 330
R37 N003 SIGNAL_MOSFET 330
R48 SIGNAL_MOSFET 0 10000
M11 SIGNAL_MOSFET N010 N006 N006 Si1555DL_P
R5 N009 0 33000
A11 N008 0 N015 0 0 N009 Deny_Signal 0 DFLOP Vhigh = 5
D5 RESET_GATE N038 D
C15 RESET_CLK 0 17n
R39 RESET_CLK N022 5000
R40 N023 N022 1000
D6 RESET_CLK N023 D
M14 N048 BATT_1_GATE N049 N049 Si7469DP
M15 OUTPUT_RAIL BATT_1_GATE N049 N049 Si7469DP
R42 N049 BATT_1_GATE 5000
C19 N049 BATT_1_GATE 10p
D7 BATT_1_GATE N049 EDZV13B
R43 BATT_1_GATE N055 650
M16 N055 N056 0 0 BSC047N08NS3
R44 BATT_1_GATE 0 10e5
R45 N056 BATT_1_gate_control_signal 220
R46 BATT_1_gate_control_signal 0 10000
C20 N056 0 10p
M10 N058 BATT_2_GATE N059 N059 Si7469DP
M12 OUTPUT_RAIL BATT_2_GATE N059 N059 Si7469DP
R19 N059 BATT_2_GATE 5000
C18 N059 BATT_2_GATE 10p
D3 BATT_2_GATE N059 EDZV13B
R20 BATT_2_GATE N065 650
M13 N065 N067 0 0 BSC047N08NS3
R41 BATT_2_GATE 0 10e5
R47 N067 BATT_2_gate_control_signal 110
R49 BATT_2_gate_control_signal 0 10000
C21 N067 0 10p
M17 N041 UMB_GATE N042 N042 Si7469DP
M18 OUTPUT_RAIL UMB_GATE N042 N042 Si7469DP
R50 N042 UMB_GATE 10000
C22 N042 UMB_GATE 10p
M19 N043 N044 0 0 BSC047N08NS3
R51 UMB_GATE 0 10e5
R52 N044 Umbilical_gate_control_signal 220
R53 Umbilical_gate_control_signal 0 10000
C23 N044 0 10p
D9 UMB_GATE N042 EDZV22B
R54 UMB_GATE N043 10000
R55 0 OUTPUT_RAIL 5
C1 N061 0 1µ
R7 N022 0 33000
R11 OUTPUT_RAIL N061 10
R§BATT2 N058 BATT_2 0.01
R§BATT1 N048 BATT_1 0.01
R§UMB N041 UMBILICAL 0.01
L1 N045 UMBILICAL 20n
L2 N046 BATT_1 20n
L3 N047 BATT_2 20n
R9 N022 N028 0.001
R10 LOGIC_POWER N006 0.001
A5 N068 0 0 0 0 0 N071 0 AND Vhigh = 4.9, Vlow = 0.1,Td = 5n, Trise = 10n, Tfall = 10n
A13 0 0 0 0 0 0 N068 0 SCHMITT Vhigh = 4.9, Vlow = 0.1, Vt = 2.5, Vh =1
A15 N062 0 0 0 0 0 P001 0 SCHMITT Vhigh = 4.9, Vlow = 0.1, Vt = 2.5, Vh =1
A21 N063 0 0 0 0 0 N064 0 SCHMITT Vhigh = 4.9, Vlow = 0.1, Vt = 2.5, Vh =1
A1 N062 0 0 0 0 0 N066 0 SCHMITT Vhigh = 4.9, Vlow = 0.1, Vt = 2.5, Vh =1
A23 N069 0 0 0 0 0 N070 0 SCHMITT Vhigh = 4.9, Vlow = 0.1, Vt = 2.5, Vh =1
A24 N072 0 0 0 0 0 N073 0 SCHMITT Vhigh = 4.9, Vlow = 0.1, Vt = 2.5, Vh =1
A27 Deny_Signal 0 0 0 0 0 N019 0 SCHMITT Vhigh = 4.9, Vlow = 0.1, Vt = 2.5, Vh =1
A19 Umbilical_gate_control_logic_output 0 0 0 0 0 N021 0 SCHMITT Vhigh = 4.9, Vlow = 0.1, Vt = 2.5, Vh =1
A25 N024 0 0 0 0 0 N025 0 SCHMITT Vhigh = 4.9, Vlow = 0.1, Vt = 2.5, Vh =1
A26 Deny_Signal 0 0 0 0 0 N027 0 SCHMITT Vhigh = 4.9, Vlow = 0.1, Vt = 2.5, Vh =1
A29 BATT_1_gate_control_logic_output 0 0 0 0 0 N031 0 SCHMITT Vhigh = 4.9, Vlow = 0.1, Vt = 2.5, Vh =1
A30 N033 0 0 0 0 0 N034 0 SCHMITT Vhigh = 4.9, Vlow = 0.1, Vt = 2.5, Vh =1
A31 Deny_Signal 0 0 0 0 0 N036 0 SCHMITT Vhigh = 4.9, Vlow = 0.1, Vt = 2.5, Vh =1
A33 BATT_2_gate_control_signal_logic_output 0 0 0 0 0 N037 0 SCHMITT Vhigh = 4.9, Vlow = 0.1, Vt = 2.5, Vh =1
A34 N039 0 0 0 0 0 N040 0 SCHMITT Vhigh = 4.9, Vlow = 0.1, Vt = 2.5, Vh =1
A36 N004 0 0 0 0 0 N005 0 SCHMITT Vhigh = 4.9, Vlow = 0.1, Vt = 2.5, Vh =1
A37 N011 0 0 0 0 0 N007 0 SCHMITT Vhigh = 4.9, Vlow = 0.1, Vt = 2.5, Vh =1
A38 N016 0 0 0 0 0 N012 0 SCHMITT Vhigh = 4.9, Vlow = 0.1, Vt = 2.5, Vh =1
A39 N017 0 0 0 0 0 N013 0 SCHMITT Vhigh = 4.9, Vlow = 0.1, Vt = 2.5, Vh =1
A40 P001 0 0 0 N064 0 BATT_1_gate_control_logic_output 0 AND Vhigh = 4.9, Vlow = 0.1,Td = 5n, Trise = 2.5n, Tfall = 2.5n
A22 Umbilical_gate_control_signal 0 0 0 0 N004 0 0 SCHMITT td = 5n, Vhigh = 4.9, Vlow = 0.1, Vt = 2.81, Vh = 0.555, Trise = 2.5n
A3 BATT_1_gate_control_signal 0 0 0 0 N011 0 0 SCHMITT td = 5n, Vhigh = 4.9, Vlow = 0.1, Vt = 2.81, Vh = 0.555, Trise = 2.5n
A6 BATT_2_gate_control_signal 0 0 0 0 N016 0 0 SCHMITT td = 5n, Vhigh = 4.9, Vlow = 0.1, Vt = 2.81, Vh = 0.555, Trise = 2.5n
A17 RESET_GATE 0 0 0 0 N017 0 0 SCHMITT td = 5n, Vhigh = 4.9, Vlow = 0.1, Vt = 2.81, Vh = 0.555, Trise = 2.5n
A2 N066 0 N070 0 N073 0 BATT_2_gate_control_signal_logic_output 0 AND Vhigh = 4.9, Vlow = 0.1,Td = 5n, Trise = 2.5n, Tfall = 2.5n
A41 N019 0 N021 0 N025 0 N020 0 AND Vhigh = 4.9, Vlow = 0.1,Td = 5n, Trise = 2.5n, Tfall = 2.5n
A4 N005 N007 N012 N013 0 0 N008 0 AND Vhigh = 4.9, Vlow = 0.1,Td = 5n, Trise = 2.5n, Tfall = 2.5n
A28 N027 0 N031 0 N034 0 N029 0 AND Vhigh = 4.9, Vlow = 0.1,Td = 5n, Trise = 2.5n, Tfall = 2.5n
A32 N036 0 N037 0 N040 0 N035 0 AND Vhigh = 4.9, Vlow = 0.1,Td = 5n, Trise = 2.5n, Tfall = 2.5n
A10 N026 0 N030 0 N032 0 N028 0 OR Vhigh = 5, Vlow = 0.1V, Td = 3.5n, Trise = 2.5n, Tfall = 2.5n
A35 N035 0 0 0 0 0 N032 0 SCHMITT Vhigh = 4.9, Vlow = 0.1, Vt = 2.5, Vh =1
A42 N020 0 0 0 0 0 N026 0 SCHMITT Vhigh = 4.9, Vlow = 0.1, Vt = 2.5, Vh =1
A18 N029 0 0 0 0 0 N030 0 SCHMITT Vhigh = 4.9, Vlow = 0.1, Vt = 2.5, Vh =1
A43 RESET_CLK 0 0 0 0 0 N018 0 SCHMITT Vhigh = 4.9, Vlow = 0.1, Vt = 2.5, Vh =1
A44 N008 0 0 0 0 0 N014 0 SCHMITT Vhigh = 4.9, Vlow = 0.1, Vt = 2.5, Vh =1
A20 N014 0 0 0 N018 0 N015 0 OR Vhigh = 5, Vlow = 0.1V, Td = 3.5n, Trise = 2.5n, Tfall = 2.5n
.model D D
.lib C:\Users\reinz\AppData\Local\LTspice\lib\cmp\standard.dio
.model NMOS NMOS
.model PMOS PMOS
.lib C:\Users\reinz\AppData\Local\LTspice\lib\cmp\standard.mos
.tran 800m
* Need to switch all the output signals to not invert the signal
* common switch debouncing values
* ORing diodes or or gate, this needs to supply some current to turn on the transmission gate so idk?
* Maybe use transmission gates here or something (single rail transmission gates)
* If the propogation delay is high, then the and gate wont read a fast switch over event, maybe add some sort of delay so down time is more easier to detect.
* Any decoupling capacitors here?
* Voltage divider so when the umbilical falls below 30V this switches off
.lib ADM7170-5.0.sub
.backanno
.end
