* E:\Outpost Vault\Outpost Door\Outpost Quick Access\Projects\1) Major Projects\Work for SOAR\PMB REV 2\Code\SOAR_PMB_Rev_2\SPICE SIMS\Switching Logic.asc
* Generated by LTspice 24.1.4 for Windows.
V§UMBILICAL N026 0 PULSE(0 48 100ms 10m 4m 200m 5 1)
V§BATT_1 N025 0 PULSE(0 16.8 300ms 10m 10m 500m 5 1)
V§BATT_2 N024 0 PULSE(16.8 16.8 20m 5m 100m 10 11 1)
R1 UMBILICAL N023 10000
R2 N023 0 1750
C2 Umbilical_comparator 0 100n
A7 BATT_2_comparator LOGIC_POWER 0 0 0 0 N038 0 SCHMITT Trise=1u, Vhigh = 5, Vt = 0.1, Vh = 0.05
A8 BATT_1_comparator LOGIC_POWER 0 0 0 N037 N035 0 SCHMITT Trise=1u, Vhigh = 5, Vt = 0.1, Vh = 0.05
A9 Umbilical_comparator LOGIC_POWER 0 0 0 N034 Umbilical_gate_control_logic_output 0 SCHMITT Trise=20u, Vhigh = 5, Vt = 0.05, Vh = 0.075, Td = 5u
R8 N023 Umbilical_comparator 1000
B§UMBILICAL_Noise UMBILICAL N026 V=white(2e4*time) / 13
BATT_1_Noise BATT_1 N025 V=white(2e4*time) / 13
BATT_2_Noise BATT_2 N024 V=white(2e4*time) / 13
R3 BATT_1 N027 10000
R4 N027 0 5400
R6 BATT_2 N029 10000
R12 N029 0 5400
C7 N031 0 1n
C8 LOGIC_POWER 0 4.7µ Rser=1.5m
X§U1 LDO_POWER LOGIC_POWER LDO_POWER N031 LOGIC_POWER 0 ADM7170-5.0
R7 N028 UMBILICAL_GATE 220
D8 N030 N028 DFLZ33
Q2 N032 N033 0 0 NPN
R15 Umbilical_gate_control_signal N033 1000
R22 N033 0 10000
R11 N028 UMBILICAL 10000
C5 UMBILICAL_GATE 0 10n
A1 N034 0 0 0 N035 0 BATT_1_gate_control_logic_output 0 AND Vhigh = 5, Td = 33n
A2 N034 0 N037 0 N038 0 BATT_2_gate_control_signal_logic_output 0 AND Vhigh = 5, Td = 33n, Tfall = 30n
R9 N036 BATT_1_GATE 1000
Q1 N039 N040 0 0 NPN
R10 BATT_1_gate_control_signal N040 1000
R14 N040 0 10000
R23 N036 BATT_1 10000
C1 BATT_1_GATE 0 10n
R24 N041 BATT_2_GATE 220
Q3 N042 N043 0 0 NPN
R25 BATT_2_gate_control_signal N043 1000
R26 N043 0 10000
R27 N041 BATT_2 10000
C6 BATT_2_GATE 0 10n
R28 N036 N039 0.1
R29 N041 N042 0.1
R30 N030 N032 0.1
R31 UMBILICAL_GATE 0 10e4
C11 BATT_1_comparator 0 100n
R32 N027 BATT_1_comparator 1000
C12 BATT_2_comparator 0 100n
R33 N029 BATT_2_comparator 1000
D1 UMBILICAL LDO_POWER D
D2 BATT_1 LDO_POWER D
D4 BATT_2 LDO_POWER D
C3 BATT_1_gate_control_signal 0 10p
C4 Umbilical_gate_control_signal 0 10p
C13 BATT_2_gate_control_signal 0 10p
A4 N001 0 N009 0 N010 0 N005 0 AND Vhigh = 5, Td = 33n
A5 N006 0 Umbilical_gate_control_logic_output 0 N012 0 N011 0 AND Vhigh = 5, Td = 33n
A12 UMBILICAL BUCK_RAIL 0 0 0 0 N012 0 SCHMITT Trise=1u, Vhigh = 5, Vt = 0.05, Vh = 0.075, Td = 10n
D3 N011 N014 D
A13 N006 0 BATT_1_gate_control_logic_output 0 N015 0 N013 0 AND Vhigh = 5, Td = 33n
A14 BATT_1 BUCK_RAIL 0 0 0 0 N015 0 SCHMITT Trise=1u, Vhigh = 5, Vt = 0.05, Vh = 0.075, Td = 10n
D10 N013 N014 D
A15 N006 0 BATT_2_gate_control_signal_logic_output 0 N019 0 N017 0 AND Vhigh = 5, Td = 33n
A16 BATT_2 BUCK_RAIL 0 0 0 0 N019 0 SCHMITT Trise=1u, Vhigh = 5, Vt = 0.05, Vh = 0.075, Td = 10n
D12 N017 N014 D
M7 BATT_2_gate_control_signal N002 BATT_2_gate_control_signal_logic_output BATT_2_gate_control_signal_logic_output Si1555DL_P
A3 Umbilical_gate_control_signal 0 0 0 0 N001 0 0 BUF Vhigh = 5, Td = 33n
A6 BATT_1_gate_control_signal 0 0 0 0 N009 0 0 BUF Vhigh = 5, Td = 33n
A17 BATT_2_gate_control_signal 0 0 0 0 N010 0 0 BUF Vhigh = 5, Td = 33n
M1 BATT_1_gate_control_signal N003 BATT_1_gate_control_logic_output BATT_1_gate_control_logic_output Si1555DL_P
M6 Umbilical_gate_control_signal N004 Umbilical_gate_control_logic_output Umbilical_gate_control_logic_output Si1555DL_P
A18 N005 RESET 0 0 0 0 N006 0 SRFLOP Vhigh = 5, Vh = 0.5, Vt = 0.05
C10 RESET 0 20n
R17 N014 0 10000
M8 N020 UMBILICAL_GATE UMBILICAL UMBILICAL Si4427DY
M9 N020 UMBILICAL_GATE BUCK_RAIL BUCK_RAIL Si4427DY
C16 N020 UMBILICAL_GATE 0.1µ
R20 N020 UMBILICAL_GATE 10000
M2 N021 BATT_1_GATE BATT_1 BATT_1 Si4427DY
M3 N021 BATT_1_GATE BUCK_RAIL BUCK_RAIL Si4427DY
C9 N021 BATT_1_GATE 0.1µ
R18 N021 BATT_1_GATE 10000
M4 N022 BATT_2_GATE BATT_2 BATT_2 Si4427DY
M10 N022 BATT_2_GATE BUCK_RAIL BUCK_RAIL Si4427DY
C17 N022 BATT_2_GATE 0.1µ
R19 N022 BATT_2_GATE 10000
R21 BUCK_RAIL 0 10000
R36 N018 N014 10000
D5 RESET N016 D
R16 N016 N014 20000
R38 N008 N007 220
R34 N002 SIGNAL_MOSFET 220
R35 N003 SIGNAL_MOSFET 220
R37 N004 SIGNAL_MOSFET 220
R48 SIGNAL_MOSFET 0 10000
C14 SIGNAL_MOSFET 0 1n
C21 N008 0 10p
M11 SIGNAL_MOSFET N008 LOGIC_POWER LOGIC_POWER Si1555DL_P
A10 N006 0 0 0 0 N007 0 0 BUF Vhigh = 5, Td = 33n
R5 N007 0 10000
D6 N018 RESET D
.model D D
.lib C:\Users\reinz\AppData\Local\LTspice\lib\cmp\standard.dio
.model NPN NPN
.model PNP PNP
.lib C:\Users\reinz\AppData\Local\LTspice\lib\cmp\standard.bjt
.model NMOS NMOS
.model PMOS PMOS
.lib C:\Users\reinz\AppData\Local\LTspice\lib\cmp\standard.mos
.tran 1
* Extra pull up resistors so the gate wont be floating if it is disconected somehow
* Diodes to get a gradual turn on (for delaying purposes)
* Need to switch all the output signals to not invert the signal
* Ask if this extra pull up resistor is nessary
* Extra cap so that negitive voltage spike when the npn turns on doesn't affect the gate voltage
* NPN needs to resist like upwards of 50V
* Extra pull down so when the umbilical is disconected, the gate wont be in a high impedance state
* common switch debouncing values
* ORing diodes or or gate, this needs to supply some current to turn on the transmission gate so idk?
* Voltage spike protection zener diode?
* Maybe look into gate driver circuit to save space and cost
* Maybe use transmission gates here or something (single rail transmission gates)
.lib ADM7170-5.0.sub
.backanno
.end
