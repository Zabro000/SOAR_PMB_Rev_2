* E:\Outpost Vault\Outpost Door\Outpost Quick Access\Projects\1) Major Projects\Work for SOAR\PMB REV 2\Code\SOAR_PMB_Rev_2\SPICE SIMS\Main circuit.asc
* Generated by LTspice 24.1.4 for Windows.
V§UMBILICAL N033 0 PULSE(0 48 0 10m 2m 200m 500m 2) Rser={Battery_ESR}
V§BATT_1 N034 0 PULSE(0 16.8 0 10m 10m 500m 750m 2) Rser={Battery_ESR}
V§BATT_2 N035 0 PULSE(0 16.8 0 10m 10m 810m 11 1) Rser={Battery_ESR}
R1 N027 UMBILICAL 100000
R2 N027 0 25000
C2 Umbilical_priority_comparator 0 220n
R8 N027 Umbilical_priority_comparator 2000
B§UMBILICAL_Noise N014 N033 V=white(2e4*time) / 13
BATT_1_Noise N021 N034 V=white(2e4*time) / 13
BATT_2_Noise N025 N035 V=white(2e4*time) / 13
C7 N041 0 1n
C8 N032 0 4.7µ Rser=1.5m
X§U1 N028 N032 N028 N041 N032 0 ADM7170-5.0
C1 OUTPUT_RAIL_1 0 {bulk_capacitor} Rser=0.05
C13 LOGIC_POWER 0 1µ
C14 LOGIC_POWER 0 1µ
C16 LOGIC_POWER 0 1µ
C17 LOGIC_POWER 0 1µ
C24 LOGIC_POWER 0 1µ
C26 LOGIC_POWER 0 0.1µ
C27 LOGIC_POWER 0 0.1µ
C28 LOGIC_POWER 0 0.1µ
C29 LOGIC_POWER 0 0.1µ
C30 LOGIC_POWER 0 0.1µ
C3 LOGIC_POWER 0 1µ
C37 LOGIC_POWER 0 0.1µ
C5 LOGIC_POWER 0 1µ
C6 LOGIC_POWER 0 1µ
C9 LOGIC_POWER 0 1µ
C32 LOGIC_POWER 0 1µ
C39 LOGIC_POWER 0 0.1µ
C40 LOGIC_POWER 0 0.1µ
C41 LOGIC_POWER 0 0.1µ
C42 LOGIC_POWER 0 0.1µ
R13 LOGIC_POWER N032 0.0001
X§U15 N006 N016 0 Umbilical_gate_control_logic_output Deny_signal UMBILICAL_gate_drive N012 N004 N007 LTC7001
R11 N016 0 67857
M4 N003 UMBILICAL_gate_drive N004 N004 IPA180N10N3
M5 OUTPUT_RAIL UMBILICAL_gate_drive N004 N004 IPA180N10N3
D7 N006 N007 RF071MM2S
R19 UMBILICAL_gate_drive N012 {rise_resistor}
C20 N020 0 20n
R20 UMBILICAL_gate_drive N020 10
X§U14 N037 N044 0 BATT_1_gate_control_logic_output Deny_signal BATT_1_gate_drive N043 N031 N038 LTC7001
M2 N030 BATT_1_gate_drive N031 N031 IPA180N10N3
M3 OUTPUT_RAIL BATT_1_gate_drive N031 N031 IPA180N10N3
D3 N037 N038 RF071MM2S
R15 BATT_1_gate_drive N043 500
C21 N045 0 20n
R17 BATT_1_gate_drive N045 10
X§U16 N058 N064 0 BATT_2_gate_control_signal_logic_output Deny_signal BATT_2_gate_drive N062 N054 N059 LTC7001
M8 N053 BATT_2_gate_drive N054 N054 IPA180N10N3
M9 OUTPUT_RAIL BATT_2_gate_drive N054 N054 IPA180N10N3
D8 N058 N059 RF071MM2S
R23 BATT_2_gate_drive N062 500
C23 N067 0 20n
R24 BATT_2_gate_drive N067 10
D9 0 N004 D
D10 0 N031 D
D11 0 N054 D
D12 0 Deny_signal UMZ5_1N
R14 N044 0 67857
D13 0 Deny_signal UMZ5_1N
R22 N064 0 67857
D14 0 Deny_signal UMZ5_1N
R27 N003 UMBILICAL 0.00001
R28 N030 BATT_1 0.00001
R29 N053 BATT_2 0.001
C33 LOGIC_POWER 0 1µ
C34 LOGIC_POWER 0 1µ
C35 LOGIC_POWER 0 1µ
C43 LOGIC_POWER 0 0.1µ
C44 LOGIC_POWER 0 0.1µ
C45 LOGIC_POWER 0 0.1µ
X§U17 Umbilical_turn_on BATT_1_turn_on BATT_2_turn_on BATT_2_turn_on BATT_2_turn_on N046 SN74LVC1G332DBVR
X§U2 5V N046 N046 RESET_GATE N047 NC_01 SN74LVC2G74DCUR
X§U4 5V N001 N001 N009 Umbilical_turn_on NC_02 SN74LVC2G74DCUR
C12 N008 0 2.2n
R16 N008 N001 10000
R33 N001 0 68000
X§U6 5V N018 N018 N024 BATT_1_turn_on NC_03 SN74LVC2G74DCUR
R35 N023 N018 10000
R36 N018 0 68000
X§U19 5V N029 N029 N040 BATT_2_turn_on NC_04 SN74LVC2G74DCUR
R37 N039 N029 10000
R38 N029 0 68000
X§U21 N039 N040 SN74LVC1G14DBVR
X§U22 N023 N024 SN74LVC1G14DBVR
V2 5V 0 5
X§U5 N008 N009 SN74LVC1G14DBVR
X§U18 Umbilical_priority_comparator LOGIC_POWER LOGIC_POWER N002 TLV1851DBVR
X§U20 BATT_1_priority_comparator LOGIC_POWER LOGIC_POWER N011 TLV1851DBVR
X§U23 BATT_2_priority_comparator LOGIC_POWER LOGIC_POWER N019 TLV1851DBVR
X§U26 N002 N005 SN74LVC1G14DBVR
X§U27 N011 N013 SN74LVC1G14DBVR
X§U12 N061 OUTPUT_RAIL_comparator LOGIC_POWER N056 TLV1851DBVR
X§U28 N066 OUTPUT_RAIL_comparator LOGIC_POWER N063 TLV1851DBVR
X§U30 N070 OUTPUT_RAIL_comparator LOGIC_POWER N068 TLV1851DBVR
R41 N051 0 10e4
R42 N051 N050 0.00001
X§U31 N049 N055 N057 NC_05 NC_06 N050 SN74LVC1G332DBVR
C51 N052 0 2.2n
R43 N052 N051 4700
X§U32 N052 RESET_GATE SN74LVC1G14DBVR
D5 BATT_2 N028 MMSD4148
D6 BATT_1 N028 MMSD4148
D15 UMBILICAL N028 MMSD4148
R7 N036 0 32000
R9 BATT_1 N036 68000
C10 BATT_1_priority_comparator 0 10n
R12 N036 BATT_1_priority_comparator 330
R44 BATT_2 N042 68000
C15 BATT_2_priority_comparator 0 10n
R45 N042 BATT_2_priority_comparator 330
R3 UMBILICAL N060 68000
R4 N060 0 68000
R46 OUTPUT_RAIL N048 68000
R47 N048 0 68000
C11 N061 0 1n
R48 N060 N061 330
R6 BATT_1 N065 68000
R31 N065 0 68000
C47 N066 0 1n
R32 N065 N066 330
R34 BATT_2 N069 68000
R49 N069 0 68000
C52 N070 0 1n
R50 N069 N070 330
C53 OUTPUT_RAIL_comparator 0 1n
R51 N048 OUTPUT_RAIL_comparator 330
R52 OUTPUT_RAIL_1 OUTPUT_RAIL 0.00001
C4 LOGIC_POWER 0 1µ
C38 LOGIC_POWER 0 1µ
C54 LOGIC_POWER 0 0.1µ
C55 LOGIC_POWER 0 0.1µ
C57 LOGIC_POWER 0 1µ
C58 LOGIC_POWER 0 1µ
C59 LOGIC_POWER 0 1µ
C60 LOGIC_POWER 0 0.1µ
C61 LOGIC_POWER 0 0.1µ
C62 LOGIC_POWER 0 0.1µ
C63 LOGIC_POWER 0 1µ
C64 LOGIC_POWER 0 0.1µ
C25 LOGIC_POWER 0 1µ
C31 LOGIC_POWER 0 1µ
C65 LOGIC_POWER 0 1µ
C66 LOGIC_POWER 0 1µ
C67 LOGIC_POWER 0 0.1µ
C68 LOGIC_POWER 0 0.1µ
C69 LOGIC_POWER 0 0.1µ
C70 LOGIC_POWER 0 0.1µ
C71 LOGIC_POWER 0 1µ
C72 LOGIC_POWER 0 1µ
C74 LOGIC_POWER 0 0.1µ
C75 LOGIC_POWER 0 0.1µ
X§U3 N047 Umbilical_gate_control_logic_output N056 N056 N056 N049 SN74LVC1G08DBVR
X§U7 N047 BATT_1_gate_control_logic_output N063 N063 N063 N055 SN74LVC1G08DBVR
X§U8 N047 BATT_2_gate_control_signal_logic_output N068 N068 N068 N057 SN74LVC1G08DBVR
X§U9 N005 N011 N011 N011 N011 N010 SN74LVC1G08DBVR
X§U10 N005 N013 N019 N019 N019 N017 SN74LVC1G08DBVR
R40 BATT_2_gate_control_signal_logic_output N017 0.00001
R53 BATT_1_gate_control_logic_output N010 0.00001
R54 Umbilical_gate_control_logic_output N002 0.00001
R§Deny_signal_current_sense Deny_signal N047 0.00001
R56 N037 LOGIC_POWER 0.000001
R57 N058 LOGIC_POWER 0.000001
R58 N006 LOGIC_POWER 0.000001
C50 N023 0 2.2n
C56 N039 0 2.2n
A2 Umbilical_gate_control_logic_output 0 0 0 0 0 N001 0 SCHMITT Vhigh = 4.9, Vlow = 0.1, Vt = 2.5, Vh =1, Trise = 2ns
A1 BATT_1_gate_control_logic_output 0 0 0 0 0 N018 0 SCHMITT Vhigh = 4.9, Vlow = 0.1, Vt = 2.5, Vh =1
A3 BATT_2_gate_control_signal_logic_output 0 0 0 0 0 N029 0 SCHMITT Vhigh = 4.9, Vlow = 0.1, Vt = 2.5, Vh =1
C22 N004 N007 500n
R5 N042 0 32000
L1 UMBILICAL N015 {para_L}
L2 BATT_1 N022 {para_L}
L3 BATT_2 N026 {para_L}
C18 N031 N038 500n
C49 N054 N059 500n
D2 N014 N015 AHHHH
D4 N021 N022 AHHHH
D16 N025 N026 AHHHH
B2 OUTPUT_RAIL_1 0 P = if(V(OUTPUT_RAIL_1) > 15, {a12V_PWR}, V(OUTPUT_RAIL_1)/(15/{a12V_PWR})) Vprxover = foldback
B1 OUTPUT_RAIL_1 0 P = if(V(OUTPUT_RAIL_1) > 15, {a5V_PWR}, V(OUTPUT_RAIL_1)/(15/{a5V_PWR})) Vprxover = foldback
B3 OUTPUT_RAIL_1 0 P = if(V(OUTPUT_RAIL_1) > 15, {a3V3_PWR}, V(OUTPUT_RAIL_1)/(15/{a3V3_PWR})) Vprxover = foldback
.model D D
.lib C:\Users\reinz\AppData\Local\LTspice\lib\cmp\standard.dio
.model NMOS NMOS
.model PMOS PMOS
.lib C:\Users\reinz\AppData\Local\LTspice\lib\cmp\standard.mos
.tran 770m
* OR Gate power bypass caps
* Schmitt inverter power bypass caps
* LTC7001 power bypass caps
* POWER INPUTS & LOGIC 5V POWER CONVERTER
* SWITCHING CIRCUIT
* POWER SOURCE LOAD SWITCHES AND GATE DIRVERS
* OUTPUT RAIL
* Priority switching circuit
* Switching event sensing circuits
* Power input comparator debounce circuits
* Output rail comparator debounce circuit
* Cross conduction prevention circuit
* Back to back NMOS switches and their gate drives
* Power inputs
* 5V converter for logic circuitry
* Logic IC bypass capacitors
* Dflop power bypass caps
* AND Gate power bypass caps
* Comparator power bypass caps
.params para_L = 10p
.param rise_resistor = 500
.param bulk_capacitor = 880uf
.model AHHHH D(Vfwd = 0, Ron = 0, Ilimit = BMS_current_limit, Vrev = {Rev_prot_v})
.param BMS_current_limit = 12
.param Battery_ESR=200m
.param Rev_prot_v=10000
.params a12V_PWR= 96
.params a5V_PWR = 48
.param a3V3_PWR = 26.4
.params foldback =20
.lib ADM7170-5.0.sub
.lib LTC7001.sub
.lib SN74LVC1G08DBVR.sub
.lib SN74LVC1G14DBVR.sub
.lib SN74LVC1G332DBVR.sub
.lib SN74LVC2G74DCUR.sub
.lib TLV1851DBVR.sub
.backanno
.end
